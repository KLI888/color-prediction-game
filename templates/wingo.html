<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>49Club</title>
    <link rel="stylesheet" href="/static/style/wingo.css">
    <link rel="stylesheet" href="/static/style/utils.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.3.0/fonts/remixicon.css" rel="stylesheet" />
    <style>
        .game_result {
            padding: 10px 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: auto;
        }

        table,
        th,
        td {
            /* border: 1px solid black; */
        }

        th,
        td {
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #F95959;
            color: #fff;
        }
    </style>
</head>

<body>
    <section class="main_section">
        <header>
            <div class="navbar">
                <div class="nav_back">
                    <a href="/"><i class="ri-arrow-left-s-line"></i></a>
                </div>
                <div class="logo">
                    <img src="/static/assets/logo2.png" alt="">
                </div>
                <div class="nav_icon">
                    <div class="mail">
                        <a><i class="ri-customer-service-2-line"></i></a>
                    </div>
                    <div class="down">
                        <i class="ri-download-cloud-fill"></i>
                    </div>
                </div>
            </div>
            <div class="balance">
                <div class="balance_amount">
                    <h3>₹{{profile.user_balance}}</h3>
                    <p><i class="ri-wallet-3-fill"></i> Wallet ballance</p>
                </div>
                <div class="balance_btns">
                    <a href="/withdrawPage" class="withdraw_btn">Withdraw</a>
                    <a href="/depositePage" class="deposite_btn">Deposit</a>
                </div>
            </div>
            <div class="main_details">
                <h1><i class="ri-volume-up-fill"></i></h1>
                <div class="details_text">
                    <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolorem debitis pariatur</p>
                </div>
                <div class="details_btn"><i class="ri-fire-fill"></i> Details</div>
            </div>
            <div class="wingo_times">
                <div class="wingo_time_card active">
                    <img src="/static/assets/clock.png" alt="">
                    <p>Win Go 30<br>second</p>
                </div>
                <div class="wingo_time_card">
                    <img src="/static/assets/clock2.png" alt="">
                    <p>Win Go 1<br>minute</p>
                </div>
                <div class="wingo_time_card">
                    <img src="/static/assets/clock2.png" alt="">
                    <p>Win Go 3<br>minute</p>
                </div>
                <div class="wingo_time_card">
                    <img src="/static/assets/clock2.png" alt="">
                    <p>Win Go 5<br>minute</p>
                </div>
            </div>
        </header>
        <main>
            <div class="main_ticket">
                <div class="ticket_left">
                    <a href=""><i class="ri-article-fill"></i> How to play</a><br><br>
                    <p>Win Go 30 seconds</p>
                    <p>Grow your money here.</p>
                </div>
                <div class="ticket_right">
                    <p>Time remaining</p>
                    <div class="ticket_time">
                        <div class="time">0</div>
                        <div class="time">0</div>
                        <div class="time">:</div>
                        <div class="time">0</div>
                        <div class="time">0</div>
                    </div>
                    <p id="game_round_id"></p>
                </div>
            </div>
            <div class="game_window">
                <div class="game_color">
                    <p class="game_color_cl" id="color_green">Green</p>
                    <p class="game_color_cl" id="color_violet">Violet</p>
                    <p class="game_color_cl" id="color_red">Red</p>
                </div>
                <div class="game_number">
                    <span class="game_number_cl" data-value="0">
                        <img src="/static/assets/0.png" alt="">
                    </span>
                    <span class="game_number_cl" data-value="1">
                        <img src="/static/assets/1.png" alt="">
                    </span>
                    <span class="game_number_cl" data-value="2">
                        <img src="/static/assets/2.png" alt="">
                    </span>
                    <span class="game_number_cl" data-value="3">
                        <img src="/static/assets/3.png" alt="">
                    </span>
                    <span class="game_number_cl" data-value="4">
                        <img src="/static/assets/4.png" alt="">
                    </span>
                    <span class="game_number_cl" data-value="5">
                        <img src="/static/assets/5.png" alt="">
                    </span>
                    <span class="game_number_cl" data-value="6">
                        <img src="/static/assets/6.png" alt="">
                    </span>
                    <span class="game_number_cl" data-value="7">
                        <img src="/static/assets/7.png" alt="">
                    </span>
                    <span class="game_number_cl" data-value="8">
                        <img src="/static/assets/8.png" alt="">
                    </span>
                    <span class="game_number_cl" data-value="9">
                        <img src="/static/assets/9.png" alt="">
                    </span>
                </div>
                <div class="game_size">
                    <div class="game_size_cl size_big">Big</div>
                    <div class="game_size_cl size_small">Small</div>
                </div>
            </div>
            <div class="game_result">
                <table>
                    <thead>
                        <tr>
                            <th>Period</th>
                            <th>Number</th>
                            <th>Big/Small</th>
                            <th>Color</th>
                        </tr>
                    </thead>
                    <tbody id="results">
                        <tr>
                            <td id="round_id"></td>
                            <td></td>
                            <td></td>
                            <td id="win_color"></td>
                        </tr>
                        <!-- Add more rows as needed -->
                        {% for result in page_obj %}
                        <tr>
                            <td id="round_id">{{ result.round.game_id }}</td>
                            <td></td>
                            <td></td>
                            <td id="win_color"> {{ result.win_color }}</td>
                        </tr>
                        {% endfor %}

                    </tbody>

                </table>
                <div class="pagination" style="text-align: center; margin-top: 20px;">
                    <span class="step-links">
                        {% if page_obj.has_previous %}
                        <a href="?page={{ page_obj.previous_page_number }}"><i style="color: #111; font-size: 22px;"
                                class="ri-arrow-left-wide-line"></i></a>
                        {% endif %}

                        <span class="current">
                            {{ page_obj.number }}/{{ page_obj.paginator.num_pages }}.
                        </span>

                        {% if page_obj.has_next %}
                        <a href="?page={{ page_obj.next_page_number }}"><i style="color: #111; font-size: 22px;"
                                class="ri-arrow-right-wide-line"></i></a>
                        {% endif %}
                    </span>
                </div>
            </div>

        </main>

        <div class="buy_form_div" id="buy_form_div">
            <section id="buy_color_form" class="buy_form_color">
                <form id="buy_form" action="">
                    <div class="buy_form">
                        <div class="buy_heading">
                            <h3>Win Go 30Seconds</h3>
                            <p>Selected: <span id="selected_color"></span></p>
                            <input type="hidden" name="bet_color" value="" id="selected_color_input">
                        </div>


                        <div class="buy_balance">
                            <p>Balance</p>
                            <div>
                                <span id="balance_value_1" class="balance_value active">1</span>
                                <span id="balance_value_2" class="balance_value">10</span>
                                <span id="balance_value_3" class="balance_value">100</span>
                                <span id="balance_value_4" class="balance_value">1000</span>
                            </div>
                        </div>
                        <div class="buy_quantity">
                            <p>Quantity</p>
                            <div>
                                <span id="dec_quantity" class="active">-</span>
                                <span id="quantity_value">1</span>
                                <span id="inc_quantity" class="active">+</span>
                            </div>
                        </div>
                        <div class="buy_multiply">
                            <span class="multiply_value active">1</span>
                            <span class="multiply_value">5</span>
                            <span class="multiply_value">10</span>
                            <span class="multiply_value">20</span>
                            <span class="multiply_value">50</span>
                            <span class="multiply_value">100</span>
                        </div>

                        <div class="buy_policy">
                            <input type="radio">
                            <p>I agree</p><span>|Pre-sale rules|</span>
                        </div>
                        <div class="buy_btn">
                            <p id="buy_form_cancle">Cancle</p>
                            <input type="hidden" value="1" name="total_amount" id="total_amount">
                            <input type="hidden" name="id" value="" id="game_id">
                            <input id="buy_btn_total" type="button" value="Total amount ₹1.00">
                        </div>
                    </div>
                </form>
            </section>
        </div>
        <div class="buy_form_div_number" id="buy_form_div_number">
            <section id="buy_color_form" class="buy_form_color">
                <form id="buy_form_number" action="">
                    <div class="buy_form">
                        <div class="buy_heading">
                            <h3>Win Go 30Seconds</h3>
                            <input type="hidden" name="bet_number" value="" id="selected_number_input">
                            <p>Selected: <span id="selected_number">None</span></p>
                        </div>


                        <div class="buy_balance">
                            <p>Balance</p>
                            <div>
                                <span id="balance_value_1" class="balance_value_number active">1</span>
                                <span id="balance_value_2" class="balance_value_number">10</span>
                                <span id="balance_value_3" class="balance_value_number">100</span>
                                <span id="balance_value_4" class="balance_value_number">1000</span>
                            </div>
                        </div>
                        <div class="buy_quantity">
                            <p>Quantity</p>
                            <div>
                                <span id="dec_quantity_number" class="active">-</span>
                                <span id="quantity_value_number">1</span>
                                <span id="inc_quantity_number" class="active">+</span>
                            </div>
                        </div>
                        <div class="buy_multiply">
                            <span class="multiply_value_number active">1</span>
                            <span class="multiply_value_number">5</span>
                            <span class="multiply_value_number">10</span>
                            <span class="multiply_value_number">20</span>
                            <span class="multiply_value_number">50</span>
                            <span class="multiply_value_number">100</span>
                        </div>

                        <div class="buy_policy">
                            <input type="radio">
                            <p>I agree</p><span>|Pre-sale rules|</span>
                        </div>
                        <div class="buy_btn">
                            <p id="form_cancle_number">Cancle</p>
                            <input type="hidden" name="total_amount_number" value="1" id="total_amount_number">
                            <input id="buy_btn_total_number" type="button" value="Total amount ₹1.00">
                        </div>
                    </div>
                </form>
            </section>
        </div>

        <div class="buy_form_div_size" id="buy_form_div_size">
            <section id="buy_color_form" class="buy_form_color">
                <form action="">
                    <div class="buy_form">
                        <div class="buy_heading">
                            <h3>Win Go 30Seconds</h3>
                            <input type="hidden" name="bet_size" value="" id="selected_size_input">
                            <p>Selected: <span id="selected_size">None</span></p>
                        </div>


                        <div class="buy_balance">
                            <p>Balance</p>
                            <div>
                                <span id="balance_value_1" class="balance_value_size active">1</span>
                                <span id="balance_value_2" class="balance_value_size">10</span>
                                <span id="balance_value_3" class="balance_value_size">100</span>
                                <span id="balance_value_4" class="balance_value_size">1000</span>
                            </div>
                        </div>
                        <div class="buy_quantity">
                            <p>Quantity</p>
                            <div>
                                <span id="dec_quantity_size" class="active">-</span>
                                <span id="quantity_value_size">1</span>
                                <span id="inc_quantity_size" class="active">+</span>
                            </div>
                        </div>
                        <div class="buy_multiply">
                            <span class="multiply_value_size active">1</span>
                            <span class="multiply_value_size">5</span>
                            <span class="multiply_value_size">10</span>
                            <span class="multiply_value_size">20</span>
                            <span class="multiply_value_size">50</span>
                            <span class="multiply_value_size">100</span>
                        </div>

                        <div class="buy_policy">
                            <input type="radio">
                            <p>I agree</p><span>|Pre-sale rules|</span>
                        </div>
                        <div class="buy_btn">
                            <p id="form_cancle_size">Cancle</p>
                            <input type="hidden" name="total_amount_size" value="1" id="total_amount_size">
                            <input id="buy_btn_total_size" type="button" value="Total amount ₹1.00">
                        </div>
                    </div>
                </form>
            </section>
        </div>
    </section>




    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.7.2/axios.min.js"
        integrity="sha512-JSCFHhKDilTRRXe9ak/FJ28dcpOJxzQaCd3Xg8MyF6XFjODhy/YMCM8HW0TFDckNHWUewW+kfvhin43hKtJxAw=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- bet form submit -->



    <!-- websocket api -->
    <script>
        const gameSocket = new WebSocket(
            'ws://' + window.location.host + '/ws/test/'
        );

        let countdown; // Define the countdown interval variable
        let game_round_id;
        gameSocket.onmessage = function (e) {
            const data = JSON.parse(e.data);
            console.log(data.game_round);
            if (data.game_round && data.game_round.id) {
                game_round_id = data.game_round.game_id; // Update game_round_id

                document.getElementById('game_round_id').innerText = data.game_round.game_id;
                const timerElement = document.getElementsByClassName('ticket_time')[0];

                // Clear the previous countdown interval if it exists
                if (countdown) {
                    clearInterval(countdown);
                }

                startCountdown(timerElement, 30);
            } else {
                console.error('Invalid game_round data received:', data.game_round);
            }
        };

        gameSocket.onclose = function (e) {
            console.error('Game socket closed unexpectedly');
        };



        // buy form submit for color
        document.getElementById('buy_btn_total').addEventListener('click', () => {
            let amount = document.getElementById('total_amount').value;
            let bet_color = document.getElementById('selected_color_input').value;
            let round_id = document.getElementById('game_id').value;

            axios.post('/api/game_bet', { id: round_id, total_amount: amount, bet_color: bet_color })
                .then(response => {
                    console.log('Bet response:', response.data);
                    console.log("Bet Placed")
                })
                .catch(error => {
                    console.error('Error making bet request:', error);
                    console.log("Error placing bet")
                });
        });

        // buy form submit for number
        document.getElementById('buy_btn_total_number').addEventListener('click', () => {
            let amount = document.getElementById('total_amount_number').value;
            let bet_number = document.getElementById('selected_size_input').value;
            let round_id = document.getElementById('game_id').value;

            console.log(`Sending bet_number: ${bet_number}`);
            console.log(`Sending amount: ${amount}`);

            axios.post('/api/game_bet_number', { id: round_id, total_amount_number: amount, bet_number: bet_number })
                .then(response => {
                    console.log('Bet response:', response.data);
                    console.log("Bet Placed");
                })
                .catch(error => {
                    if (error.response) {
                        // The request was made and the server responded with a status code
                        console.error('Error response data:', error.response.data);
                        console.error('Error response status:', error.response.status);
                        console.error('Error response headers:', error.response.headers);
                    } else if (error.request) {
                        // The request was made but no response was received
                        console.error('Error request:', error.request);
                    } else {
                        // Something happened in setting up the request that triggered an Error
                        console.error('Error message:', error.message);
                    }
                    console.log("Error placing bet");
                });
        });

        
        // buy form submit for size
        document.getElementById('buy_btn_total_size').addEventListener('click', () => {
            let amount = document.getElementById('total_amount_size').value;
            let bet_size = document.getElementById('selected_number_size').value;
            let round_id = document.getElementById('game_id').value;

            console.log(`Sending bet_number: ${bet_size}`);
            console.log(`Sending amount: ${amount}`);

            axios.post('/api/game_bet_size', { id: round_id, total_amount_size: amount, bet_size: bet_size })
                .then(response => {
                    console.log('Bet response:', response.data);
                    console.log("Bet Placed");
                })
                .catch(error => {
                    if (error.response) {
                        // The request was made and the server responded with a status code
                        console.error('Error response data:', error.response.data);
                        console.error('Error response status:', error.response.status);
                        console.error('Error response headers:', error.response.headers);
                    } else if (error.request) {
                        // The request was made but no response was received
                        console.error('Error request:', error.request);
                    } else {
                        // Something happened in setting up the request that triggered an Error
                        console.error('Error message:', error.message);
                    }
                    console.log("Error placing bet");
                });
        });



        function startCountdown(timerElement, duration) {
            let time = duration;
            updateDisplay(timerElement, time);
            countdown = setInterval(() => {
                time--;
                if (time < 0) {
                    time = duration;
                }
                updateDisplay(timerElement, time);
            }, 1000);
        }

        function updateDisplay(timerElement, time) {
            const minutes = Math.floor(time / 60);
            const seconds = time % 60;
            const minuteTens = Math.floor(minutes / 10);
            const minuteOnes = minutes % 10;
            const secondTens = Math.floor(seconds / 10);
            const secondOnes = seconds % 10;

            const timeDivs = timerElement.querySelectorAll('.time');
            timeDivs[0].textContent = minuteTens;
            timeDivs[1].textContent = minuteOnes;
            timeDivs[3].textContent = secondTens;
            timeDivs[4].textContent = secondOnes;
        }
    </script>

    <script>
        const winSocket = new WebSocket(
            'ws://' + window.location.host + '/ws/game_result/'
        );

        winSocket.onmessage = function (e) {
            try {
                const data = JSON.parse(e.data);
                console.log("result here");

                if (data.game_round) {
                    console.log(data.game_round.win_color);
                    document.getElementById('round_id').innerText = data.game_round.game_id;
                    document.getElementById('win_color').innerText = data.game_round.win_color;
                    document.getElementById('game_id').value = data.game_round.game_id
                    console.log("result showed");
                } else {
                    console.error("game_round is undefined");
                }
            } catch (error) {
                console.error("Error parsing message:", error);
            }
        };

        winSocket.onclose = function (e) {
            console.error('Winner socket closed unexpectedly');
        };
    </script>




    <!-- color bet form  -->
    <script>

        // close and open the form
        var color_btn = document.getElementsByClassName("game_color_cl");
        var selected_color = document.getElementById('selected_color')

        for (let i = 0; i < color_btn.length; i++) {
            -
                color_btn[i].addEventListener('click', () => {
                    document.getElementById("buy_form_div").classList.toggle("active");
                    selected_color.textContent = color_btn[i].textContent
                    selected_color.textContent = color_btn[i].textContent;
                    document.getElementById('selected_color_input').value = color_btn[i].textContent
                });
        }

        document.getElementById("buy_form_cancle").addEventListener("click", () => {
            document.getElementById("buy_form_div").classList.toggle("active");
        })

    </script>

    <!-- number bet form -->
    <script>
        // close and open the form
        var number_btn = document.getElementsByClassName("game_number_cl");
        var selected_number = document.getElementById('selected_number')

        for (let i = 0; i < number_btn.length; i++) {
            number_btn[i].addEventListener('click', function () {
                document.getElementById("buy_form_div_number").classList.toggle("active");
                var dataValue = this.getAttribute("data-value");
                selected_number.textContent = dataValue
                selected_number.value = dataValue
                document.getElementById("selected_number_input").value = dataValue
                document.getElementById('total_amount_number').value = dataValue
            });
        }

        document.getElementById("form_cancle_number").addEventListener("click", () => {
            document.getElementById("buy_form_div_number").classList.toggle("active");
        })

    </script>

    <!-- size bet form -->
    <script>

        // close and open the form
        var size_btn = document.getElementsByClassName("game_size_cl");
        var selected_size = document.getElementById('selected_size')

        for (let i = 0; i < size_btn.length; i++) {
            size_btn[i].addEventListener('click', function () {
                document.getElementById("buy_form_div_size").classList.toggle("active");
                selected_size.textContent = size_btn[i].textContent
                selected_size.value = size_btn[i].textContent
                document.getElementById("selected_size_input").value = size_btn[i].textContent
                document.getElementById('total_amount_size').value = size_btn[i].textContent
            });
        }

        document.getElementById("form_cancle_size").addEventListener("click", () => {
            document.getElementById("buy_form_div_size").classList.toggle("active");
        })

    </script>

    <!-- form amount handeling for color -->
    <script>
        // calculating the lot price


        document.addEventListener('DOMContentLoaded', function () {
            var balance = document.querySelectorAll('.balance_value')
            var multiply = document.querySelectorAll('.multiply_value')
            var quantity = document.getElementById('quantity_value')
            var buy_btn_total = document.getElementById('buy_btn_total')

            var new_balance = 1;
            var new_quantity;

            balance.forEach(item => {
                console.log(item)
                item.addEventListener("click", () => {
                    balance.forEach(i => i.classList.remove('active'))
                    item.classList.add('active')
                    buy_btn_total.value = `Total amount ₹${parseInt(item.textContent) * parseInt(quantity.textContent)}`
                    new_balance = parseInt(item.textContent)
                    document.getElementById('total_amount').value = parseInt(item.textContent) * parseInt(quantity.textContent)
                    // console.log(item.textContent)

                })
            })

            console.log(new_balance);

            multiply.forEach(item => {
                console.log(item)
                item.addEventListener("click", () => {
                    multiply.forEach(i => i.classList.remove('active'))
                    item.classList.add('active')
                    quantity.textContent = item.textContent
                    // console.log(new_balance)

                    buy_btn_total.value = `Total amount ₹${parseInt(new_balance) * parseInt(item.textContent)}`
                    document.getElementById('total_amount').value = parseInt(new_balance) * parseInt(item.textContent)
                    // console.log(item.textContent)
                    new_quantity = parseInt(item.textContent)
                    console.log(new_balance)

                })
            })

            document.getElementById('dec_quantity').addEventListener('click', () => {
                if (quantity.textContent == 1) {
                    quantity.textContent = 1
                } else {
                    quantity.textContent = parseInt(quantity.textContent) - 1;
                    new_quantity = parseInt(quantity.textContent)
                    buy_btn_total.value = `Total amount ₹${parseInt(new_balance) * parseInt(new_quantity)}`
                    document.getElementById('total_amount').value = parseInt(new_balance) * parseInt(new_quantity)
                }
            })

            document.getElementById('inc_quantity').addEventListener('click', () => {
                if (quantity.textContent == 1000) {
                    quantity.textContent = 1000
                } else {
                    quantity.textContent = parseInt(quantity.textContent) + 1;
                    new_quantity = parseInt(quantity.textContent)
                    buy_btn_total.value = `Total amount ₹${parseInt(new_balance) * parseInt(new_quantity)}`
                    document.getElementById('total_amount').value = parseInt(new_balance) * parseInt(new_quantity)

                }
            })

        });

    </script>

    <!-- <script>       
        // calculating the lot price

        var balance = document.querySelectorAll('.balance_value')
        var multiply = document.querySelectorAll('.multiply_value')
        var quantity = document.getElementById('quantity_value')
        var buy_btn_total = document.getElementById('buy_btn_total')

        var new_balance = 1;
        var new_quantity;

        balance.forEach(item => {
            console.log(item)
            item.addEventListener("click", () => {
                balance.forEach(i => i.classList.remove('active'))
                item.classList.add('active')
                buy_btn_total.value = `Total amount ₹${parseInt(item.textContent)*parseInt(quantity.textContent)}`
                new_balance = parseInt(item.textContent)
                document.getElementById('total_amount').value = parseInt(item.textContent)*parseInt(quantity.textContent)
                // console.log(item.textContent)
                
            })
        })

        console.log(new_balance);
        
        multiply.forEach(item => {
            console.log(item)
            item.addEventListener("click", () => {
                multiply.forEach(i => i.classList.remove('active'))
                item.classList.add('active')
                quantity.textContent = item.textContent
                // console.log(new_balance)

                buy_btn_total.value = `Total amount ₹${parseInt(new_balance)*parseInt(item.textContent)}`
                document.getElementById('total_amount').value = parseInt(new_balance)*parseInt(item.textContent)
                // console.log(item.textContent)
                new_quantity = parseInt(item.textContent)
                console.log(new_balance)

            })
        })
        
        document.getElementById('dec_quantity').addEventListener('click', ()=> {
            if(quantity.textContent == 1){
                quantity.textContent = 1
            } else {
                quantity.textContent = parseInt(quantity.textContent)-1;
                new_quantity = parseInt(quantity.textContent)
                buy_btn_total.value = `Total amount ₹${parseInt(new_balance)*parseInt(new_quantity)}`
                document.getElementById('total_amount').value = parseInt(new_balance)*parseInt(new_quantity)
            }
        })

        document.getElementById('inc_quantity').addEventListener('click', ()=> {
            if(quantity.textContent == 1000){
                quantity.textContent = 1000
            } else {
                quantity.textContent = parseInt(quantity.textContent)+1;
                new_quantity = parseInt(quantity.textContent)
                buy_btn_total.value = `Total amount ₹${parseInt(new_balance)*parseInt(new_quantity)}`
                document.getElementById('total_amount').value = parseInt(new_balance)*parseInt(new_quantity)

            }
        })

    </script> -->

    <!-- form amount handeling for number -->

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var balance = document.querySelectorAll('.balance_value_number')
            var multiply = document.querySelectorAll('.multiply_value_number')
            var quantity = document.getElementById('quantity_value_number')
            var buy_btn_total_number = document.getElementById('buy_btn_total_number')

            var new_balance = 1;
            var new_quantity;

            balance.forEach(item => {
                console.log(item)
                item.addEventListener("click", () => {
                    balance.forEach(i => i.classList.remove('active'))
                    item.classList.add('active')
                    buy_btn_total_number.value = `Total amount ₹${parseInt(item.textContent) * parseInt(quantity.textContent)}`
                    new_balance = parseInt(item.textContent)
                    document.getElementById('total_amount_number').value = parseInt(item.textContent) * parseInt(quantity.textContent)
                    // console.log(item.textContent)

                })
            })

            console.log(new_balance);

            multiply.forEach(item => {
                console.log(item)
                item.addEventListener("click", () => {
                    multiply.forEach(i => i.classList.remove('active'))
                    item.classList.add('active')
                    quantity.textContent = item.textContent
                    // console.log(new_balance)

                    buy_btn_total_number.value = `Total amount ₹${parseInt(new_balance) * parseInt(item.textContent)}`
                    document.getElementById('total_amount_number').value = parseInt(new_balance) * parseInt(item.textContent)
                    // console.log(item.textContent)
                    new_quantity = parseInt(item.textContent)
                    console.log(new_balance)

                })
            })

            document.getElementById('dec_quantity_number').addEventListener('click', () => {
                if (quantity.textContent == 1) {
                    quantity.textContent = 1
                } else {
                    quantity.textContent = parseInt(quantity.textContent) - 1;
                    new_quantity = parseInt(quantity.textContent)
                    buy_btn_total_number.value = `Total amount ₹${parseInt(new_balance) * parseInt(new_quantity)}`
                    document.getElementById('total_amount_number').value = parseInt(new_balance) * parseInt(new_quantity)
                }
            })

            document.getElementById('inc_quantity_number').addEventListener('click', () => {
                if (quantity.textContent == 1000) {
                    quantity.textContent = 1000
                } else {
                    quantity.textContent = parseInt(quantity.textContent) + 1;
                    new_quantity = parseInt(quantity.textContent)
                    buy_btn_total_number.value = `Total amount ₹${parseInt(new_balance) * parseInt(new_quantity)}`
                    document.getElementById('total_amount_number').value = parseInt(new_balance) * parseInt(new_quantity)

                }
            })

        });
    </script>


    <!-- form amount handeling for size -->
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var balance = document.querySelectorAll('.balance_value_size')
            var multiply = document.querySelectorAll('.multiply_value_size')
            var quantity = document.getElementById('quantity_value_size')
            var buy_btn_total_size = document.getElementById('buy_btn_total_size')

            var new_balance = 1;
            var new_quantity;

            balance.forEach(item => {
                console.log(item)
                item.addEventListener("click", () => {
                    balance.forEach(i => i.classList.remove('active'))
                    item.classList.add('active')
                    buy_btn_total_size.value = `Total amount ₹${parseInt(item.textContent) * parseInt(quantity.textContent)}`
                    new_balance = parseInt(item.textContent)
                    document.getElementById('total_amount_size').value = parseInt(item.textContent) * parseInt(quantity.textContent)
                    // console.log(item.textContent)

                })
            })

            console.log(new_balance);

            multiply.forEach(item => {
                console.log(item)
                item.addEventListener("click", () => {
                    multiply.forEach(i => i.classList.remove('active'))
                    item.classList.add('active')
                    quantity.textContent = item.textContent
                    // console.log(new_balance)

                    buy_btn_total_size.value = `Total amount ₹${parseInt(new_balance) * parseInt(item.textContent)}`
                    document.getElementById('total_amount_size').value = parseInt(new_balance) * parseInt(item.textContent)
                    // console.log(item.textContent)
                    new_quantity = parseInt(item.textContent)
                    console.log(new_balance)

                })
            })

            document.getElementById('dec_quantity_size').addEventListener('click', () => {
                if (quantity.textContent == 1) {
                    quantity.textContent = 1
                } else {
                    quantity.textContent = parseInt(quantity.textContent) - 1;
                    new_quantity = parseInt(quantity.textContent)
                    buy_btn_total_size.value = `Total amount ₹${parseInt(new_balance) * parseInt(new_quantity)}`
                    document.getElementById('total_amount_size').value = parseInt(new_balance) * parseInt(new_quantity)
                }
            })

            document.getElementById('inc_quantity_size').addEventListener('click', () => {
                if (quantity.textContent == 1000) {
                    quantity.textContent = 1000
                } else {
                    quantity.textContent = parseInt(quantity.textContent) + 1;
                    new_quantity = parseInt(quantity.textContent)
                    buy_btn_total_size.value = `Total amount ₹${parseInt(new_balance) * parseInt(new_quantity)}`
                    document.getElementById('total_amount_size').value = parseInt(new_balance) * parseInt(new_quantity)
                }
            })
        });
    </script>

</body>

</html>